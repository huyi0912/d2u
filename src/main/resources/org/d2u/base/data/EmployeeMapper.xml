<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
    不同Mapper文件的namespace值应该保证唯一
    在程序中通过[ namespace + id ]定位到要执行哪一条SQL语句
 -->

<mapper namespace="org.d2u.base.data.EmployeeMapper">

    <!-- 通过select、insert、update、delete标签声明要执行的SQL -->
    <!-- 练习1: 查询emp表中的所有员工信息
        resultType指定查询的结果将会封装到什么类型中
        即使最终返回的结果是集合(List<Emp>),resultType也只需要指定集合中的泛型即可!
    -->

    <select id="findAll" resultType="org.d2u.base.model.Employee">
        select * from employee
    </select>

    <select id="findById" resultMap="EmployeeResultMap">
        select
          E.id       as employee_id,
          E.name     as employee_name,
          E.job      as employee_job,
          E.salary   as employee_salary,
          D.name     as department_name
          from employee E left outer join department D on D.name = E.department_name
          where E.id = #{id}
    </select>
    <!--select id="findDepartmentOfEmployee" resultMap="DepartmentResultMap">
        select * from department where id in select id from employee where id = #{id}
    </select-->
    
    <resultMap id="EmployeeResultMap" type="org.d2u.base.model.Employee">
        <id property="id" column="employee_id"/>
        <result property="name" column="employee_name"/>
        <result property="job" column="employee_job"/>
        <result property="salary" column="employee_salary"/>
        <association property="department" resultMap="org.d2u.base.data.DepartmentMapper.DepartmentSimpleResultMap" columnPrefix="department_"/>
    </resultMap>


</mapper>